/**************************************************************************************************************************************************************************************

NAME     : Pradip S Karmakar
ROLL NO  : 10
CLASS    : MCA (SEM-2)
SUBJECT  : Advance Programing (AP)

**************************************************************************************************************************************************************************************/


/**************************************************************************************************************************************************************************************

DEFINE :

	1.  Define a structure called cricket that will classify the following information:- 
    		a. Player name 
   	 	b.Team name  
   		c. Batting average
	    Using cricket declare and array player with 50 elements and write a program to read information about the players 
    	    and print team wise listing containing names of players with their batting average. 
	    Given a player name write a program to show all the details of the player

**************************************************************************************************************************************************************************************/
#include<stdio.h>
#include<conio.h>
#include<string.h>
#include<stdlib.h>

struct player{
	char Player_name[15];
	float Batting_average;
}players;

struct teams{
	int total_players;
	char Team_name[15];
	struct player players[50];
};

int getnplayer();
struct teams getData();
void getSort(struct teams[],int);
void setPrint(struct teams[],int);
void menudriven(struct teams[],int);
void main()
{
	int i,j,team_count;
	struct teams s[10];

	team_count = getnteam();
	for( i = 0; i < team_count; i++ )
	{
		s[i] = getData();
	}

	printf("\n\nBefore Sorting List \n");
	setPrint(s,team_count);
	getSort(s,team_count);
	printf("\n\nAfter Sorting List \n");
	setPrint(s,team_count);
	menudriven(s,team_count);
	getch();
}



struct teams getData()
{
	int i,player_count;
	struct teams g;
	printf("\nEnter Team Name : ");
	scanf("%s",g.Team_name);
	player_count = getnplayer();
	g.total_players = player_count;
	for( i = 0; i < player_count; i++)
	{
		printf("\nEnter Player Name : ");
		scanf("%s",g.players[i].Player_name);
		printf("\nEnter Batting Average : ");
		scanf("%f",&g.players[i].Batting_average);
	}
	printf("\n_______________________________________________________\n");
	return g;
}

int getnteam()
{
	int x;
	printf("\nEnter The Number of Teams : ");
	scanf("%d",&x);
	return x;
}

int getnplayer()
{
	int y;
	printf("\nEnter The Number of Players : ");
	scanf("%d",&y);
	return y;
}

void getSort(struct teams s[],int n)
{
	int i,j,k,l,Check;
	struct teams temp;
	struct player p;
	for( i = 0; i < n; i++ )
	{
		for( j = 0; j < s[i].total_players; j++)
		{
			for( k = 0; k < s[i].total_players - j -1; k++)
			{
				if(s[i].players[k].Batting_average < s[i].players[k+1].Batting_average )
				{
					p = s[i].players[k];
					s[i].players[k] = s[i].players[k+1];
					s[i].players[k+1] = p;
				}
			}
		}
	}
	for( i = 0; i < n; i++ )
	{
		for( j = 0; j < n - i -1; j++ )
		{
			Check = strcmp(s[j].Team_name,s[j+1].Team_name);
			if(Check > 0)
			{
				temp = s[j];
				s[j] = s[j+1];
				s[j+1] = temp;
			}
		}
	}
}

void setPrint(struct teams p[],int n)
{
	int i,j;
	for( i = 0; i < n; i++ )
	{
		printf("\nTEAM NAME = %s\n*************************************\n",p[i].Team_name);
		for( j = 0; j < p[i].total_players; j++ )
		{
			printf("\n\tPLAYER NAME = %s \n\tBATTING AVERAGE = %.2f\n*************************************\n",p[i].players[j].Player_name,p[i].players[j].Batting_average);
		}
	}
}

void menudriven(struct teams p[],int n)
{
	int val,i,j,Check;
	char player[15];
	printf("\n\nPress 1 To Search Player Detail ");
	printf("\n\nPress 2 To Exit The Program\n");
	scanf("%d",&val);
	if(val == 1)
	{
		printf("\n\nEnter Player Name : ");
		scanf("%s",player);
		
		for( i = 0; i < n; i++ )
		{
			for( j = 0; j < p[i].total_players; j++ )
			{
				Check = strcmp(p[i].players[j].Player_name,player);
				if(Check == 0)
				{
					printf("\nPLAYER NAME = %s \nTEAM NAME = %s \nBATTING AVERAGE = %.2f\n*************************************\n",p[i].players[j].Player_name,p[i].Team_name,p[i].players[j].Batting_average);
					menudriven(p,n);
				}
			}
		}
	}
	else if(val == 2)
	{
		exit(0);
	}
	else{
		printf("\n\nPlease Select Proper Options.\n");
		menudriven(p,n);
	}
	printf("\n\nPlayer Detail Not Found\n");
	menudriven(p,n);
}


/**************************************************************************************************************************************************************************************

OUTPUT :


Enter The Number of Teams : 3

Enter Team Name : XLOAD

Enter The Number of Players : 3

Enter Player Name : Pradip

Enter Batting Average : 52.4

Enter Player Name : Monil

Enter Batting Average : 60.8

Enter Player Name : Sudip

Enter Batting Average : 40.6

_______________________________________________________

Enter Team Name : UNOFFICIAL

Enter The Number of Players : 2

Enter Player Name : Nirav

Enter Batting Average : 34.6

Enter Player Name : Ajinkya

Enter Batting Average : 12.6

_______________________________________________________

Enter Team Name : REBELS

Enter The Number of Players : 4

Enter Player Name : Vijay

Enter Batting Average : 69.8

Enter Player Name : Kohli

Enter Batting Average : 89.3

Enter Player Name : Dhoni

Enter Batting Average : 92.5

Enter Player Name : Rohit

Enter Batting Average : 95.8

_______________________________________________________


Before Sorting List

TEAM NAME = XLOAD
*************************************

        PLAYER NAME = Pradip
        BATTING AVERAGE = 52.40
*************************************

        PLAYER NAME = Monil
        BATTING AVERAGE = 60.80
*************************************

        PLAYER NAME = Sudip
        BATTING AVERAGE = 40.60
*************************************

TEAM NAME = UNOFFICIAL
*************************************

        PLAYER NAME = Nirav
        BATTING AVERAGE = 34.60
*************************************

        PLAYER NAME = Ajinkya
        BATTING AVERAGE = 12.60
*************************************

TEAM NAME = REBELS
*************************************

        PLAYER NAME = Vijay
        BATTING AVERAGE = 69.80
*************************************

        PLAYER NAME = Kohli
        BATTING AVERAGE = 89.30
*************************************

        PLAYER NAME = Dhoni
        BATTING AVERAGE = 92.50
*************************************

        PLAYER NAME = Rohit
        BATTING AVERAGE = 95.80
*************************************


After Sorting List

TEAM NAME = REBELS
*************************************

        PLAYER NAME = Rohit
        BATTING AVERAGE = 95.80
*************************************

        PLAYER NAME = Dhoni
        BATTING AVERAGE = 92.50
*************************************

        PLAYER NAME = Kohli
        BATTING AVERAGE = 89.30
*************************************

        PLAYER NAME = Vijay
        BATTING AVERAGE = 69.80
*************************************

TEAM NAME = UNOFFICIAL
*************************************

        PLAYER NAME = Nirav
        BATTING AVERAGE = 34.60
*************************************

        PLAYER NAME = Ajinkya
        BATTING AVERAGE = 12.60
*************************************

TEAM NAME = XLOAD
*************************************

        PLAYER NAME = Monil
        BATTING AVERAGE = 60.80
*************************************

        PLAYER NAME = Pradip
        BATTING AVERAGE = 52.40
*************************************

        PLAYER NAME = Sudip
        BATTING AVERAGE = 40.60
*************************************


Press 1 To Search Player Detail

Press 2 To Exit The Program
1


Enter Player Name : Rohit

PLAYER NAME = Rohit
TEAM NAME = REBELS
BATTING AVERAGE = 95.80
*************************************


Press 1 To Search Player Detail

Press 2 To Exit The Program
1


Enter Player Name : Unknown


Player Detail Not Found


Press 1 To Search Player Detail

Press 2 To Exit The Program
3


Please Select Proper Options.


Press 1 To Search Player Detail

Press 2 To Exit The Program

******************************************************************************************************************************************************************************************/